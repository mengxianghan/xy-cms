(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5940ed5c","chunk-2d213eaa"],{2010:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-row",{attrs:{gutter:16}},[a("a-col",{attrs:{md:5,xs:24}},[a("a-card",{attrs:{bordered:!1}},[a("x-info-column",{ref:"informationColumn",attrs:{"selected-keys":e.selectedKeys},on:{select:e.handleSelect}})],1)],1),a("a-col",{attrs:{md:19,xs:24}},[a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-page-search mb-2"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:16}},[a("a-col",{attrs:{span:8}},[a("a-form-item",{attrs:{label:"标题"}},[a("a-input",{attrs:{"allow-clear":""},model:{value:e.searchForm.title,callback:function(t){e.$set(e.searchForm,"title",t)},expression:"searchForm.title"}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-item",[a("a-button",{attrs:{type:"primary",ghost:""},on:{click:e.handleSearch}},[a("a-icon",{attrs:{type:"search"}}),e._v(" 搜索 ")],1)],1)],1)],1)],1)],1),a("div",{directives:[{name:"action",rawName:"v-action:insert",arg:"insert"}],staticClass:"mb-2"},[a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(t){return e.$refs.editForm.handleInsert()}}},[e._v("新增新闻")])],1),a("a-table",{attrs:{columns:e.columns,"data-source":e.list,pagination:e.pagination,loading:e.loading,"row-key":"id",size:"middle"},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"status",fn:function(e){return[a("x-status",{attrs:{code:e}})]}},{key:"operation",fn:function(t,i){return[a("span",{directives:[{name:"action",rawName:"v-action:edit",arg:"edit"}]},[a("a",{on:{click:function(t){return e.$refs.editForm.handleEdit(i)}}},[e._v("编辑")]),a("a-divider",{attrs:{type:"vertical"}})],1),a("span",{directives:[{name:"action",rawName:"v-action:delete",arg:"delete"}]},[a("a-popconfirm",{attrs:{title:"确认删除此数据?"},on:{confirm:function(t){return e.$refs.editForm.handleDelete(i)}}},[a("a",[e._v("删除")])])],1)]}}])})],1)],1)],1),a("edit-form",{ref:"editForm",on:{complete:e.onComplete}})],1)},r=[],o=(a("9302"),a("513c"),a("80a0")),n=a("af5d"),s=[{title:"标题",dataIndex:"title"},{title:"所属栏目",dataIndex:"column_name"},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"创建时间",dataIndex:"create_time"},{title:"操作",dataIndex:"operation",scopedSlots:{customRender:"operation"}}],c={name:"index",components:{EditForm:n["default"]},data:function(){return{searchForm:{},columns:s,columnId:"",selectedKeys:[],list:[],pagination:{showSizeChanger:!0},loading:!1}},created:function(){this.getList()},methods:{getList:function(){var e=this;this.loading=!0,this.$api.information.news.getList({search:JSON.stringify(this.searchForm),column_id:this.columnId,current_page:this.pagination.current,page_size:this.pagination.pageSize}).then((function(t){var a=t.code,i=t.data,r=i.list,n=i.total;e.loading=!1,"200"===a&&(e.pagination=Object(o["a"])(Object(o["a"])({},e.pagination),{},{total:Number(n)}),e.list=r)})).catch((function(){e.loading=!1}))},handleTableChange:function(e){this.pagination=Object(o["a"])(Object(o["a"])({},this.pagination),{},{current:e.current,pageSize:e.pageSize}),this.getList()},handleSelect:function(e){var t=this.$xy.util.getFieldsValue(this.$refs.informationColumn.list,{parentField:"parent_id",parentId:e[0]||"",field:"id"}).join(",");this.columnId=t,this.selectedKeys=e,this.getList()},handleSearch:function(){this.getList()},onComplete:function(){this.getList()}}},l=c,d=a("4023"),u=Object(d["a"])(l,i,r,!1,null,"0b2c8a2e",null);t["default"]=u.exports},af5d:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,"confirm-loading":e.confirmLoading,width:1200},on:{ok:e.onOk,cancel:e.onCancel},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("a-form",e._b({attrs:{form:e.form}},"a-form",e.formItemLayout,!1),[a("a-row",[a("a-col",{attrs:{span:16}},[a("a-form-item",{attrs:{label:"标题"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{rules:[{required:!0,message:"请输入标题"}]}],expression:"['title',{rules:[{required:true,message:'请输入标题'}]}]"}]})],1),a("a-form-item",{attrs:{label:"副标题"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["sub_title"],expression:"['sub_title']"}]})],1),a("a-form-item",{attrs:{label:"SEO关键词"}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["seo_keywords"],expression:"['seo_keywords']"}]})],1),a("a-form-item",{attrs:{label:"SEO描述"}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["seo_description"],expression:"['seo_description']"}]})],1),a("a-form-item",{attrs:{label:"内容"}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["content"],expression:"['content']"}]})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-item",{attrs:{label:"所属栏目"}},[a("a-tree-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["column_id",{rules:[{required:!0,message:"请选择所属栏目"}]}],expression:"['column_id',{rules:[{required:true,message:'请选择所属栏目'}]}]"}],attrs:{"tree-data":e.columnList,loading:e.columnLoading}})],1),a("a-form-item",{attrs:{label:"作者"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["author"],expression:"['author']"}]})],1),a("a-form-item",{attrs:{label:"来源"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["source"],expression:"['source']"}]})],1),a("a-form-item",{attrs:{label:"外部链接"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["url"],expression:"['url']"}]})],1),a("a-form-item",{attrs:{label:"标签"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["tags"],expression:"['tags']"}],attrs:{mode:"tags"}})],1),a("a-form-item",{attrs:{label:"属性"}},[a("a-checkbox",{directives:[{name:"decorator",rawName:"v-decorator",value:["is_recommend",{valuePropName:"checked"}],expression:"['is_recommend',{valuePropName:'checked'}]"}]},[e._v("推荐")]),a("a-checkbox",{directives:[{name:"decorator",rawName:"v-decorator",value:["is_hot",{valuePropName:"checked"}],expression:"['is_hot',{valuePropName:'checked'}]"}]},[e._v("热点")])],1),a("a-form-item",{attrs:{label:"状态"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{initialValue:"1"}],expression:"['status',{initialValue:'1'}]"}]},[a("a-radio",{attrs:{value:"1"}},[e._v("正常")]),a("a-radio",{attrs:{value:"0"}},[e._v("禁用")])],1)],1),a("a-form-item",{attrs:{label:"排序"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{initialValue:"99"}],expression:"['sort',{initialValue:'99'}]"}]})],1)],1)],1)],1)],1)},r=[],o=(a("b449"),a("5d83")),n=a("e49c"),s={mixins:[n["default"]],data:function(){return{columnList:[],columnLoading:!1}},created:function(){},watch:{visible:function(e){e&&!this.columnList.length&&this.getColumnList()}},methods:{getColumnList:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.columnLoading=!0,t.next=3,e.$api.information.column.getList();case 3:a=t.sent,i=a.code,r=a.data.list,e.columnLoading=!1,"200"===i&&(e.columnList=e.$xy.util.changeKeys(r));case 8:case"end":return t.stop()}}),t)})))()},handleInsert:function(){this.toggleModal(),this.title="新增案例"},handleEdit:function(e){var t=this;this.toggleModal(),this.record=e,this.title="编辑案例",this.$nextTick((function(){t.form.setFieldsValue({title:e.title,sub_title:e.sub_title,seo_keywords:e.seo_keywords,seo_description:e.seo_description,content:e.content,column_id:e.column_id,author:e.author,source:e.source,url:e.url,tags:t.$xy.util.stringToArray(e.tags),is_recommend:t.$xy.util.stringToBoolean(e.is_recommend),is_hot:t.$xy.util.stringToBoolean(e.is_hot),status:e.status,sort:e.sort})}))},handleDelete:function(e){var t=this;this.$api.information.news.delete({id:e.id}).then((function(a){var i=a.code;"200"===i&&(t.$emit("delete",e),t.$emit("complete",e))}))},onOk:function(){var e=this;this.form.validateFieldsAndScroll((function(t,a){t||(e.confirmLoading=!0,e.$api.information.news.submit({id:e.record.id,title:a.title,sub_title:a.sub_title,seo_keywords:a.seo_keywords,seo_description:a.seo_description,content:a.content,column_id:a.column_id,author:a.author,source:a.source,url:a.url,tags:e.$xy.util.arrayToString(a.tags),is_recommend:e.$xy.util.booleanToString(a.is_recommend),is_hot:e.$xy.util.booleanToString(a.is_hot),status:a.status,sort:a.sort}).then((function(t){var i=t.code;e.confirmLoading=!1,"200"===i&&(e.reset(),e.toggleModal(),e.$emit("ok",a),e.$emit("complete",a))}),(function(t){e.confirmLoading=!1})))}))},onCancel:function(){this.reset(),this.toggleModal(),this.$emit("cancel")}}},c=s,l=a("4023"),d=Object(l["a"])(c,i,r,!1,null,"30707bb1",null);t["default"]=d.exports}}]);