(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8f379838","chunk-2d0b91dc"],{3229:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,footer:null},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("a-descriptions",{attrs:{size:"small",column:1}},[a("a-descriptions-item",{attrs:{label:"日志类型"}},[e._v(e._s(e._f("typeFilter")(e.record.type)))]),a("a-descriptions-item",{attrs:{label:"用户"}},[e._v(e._s(e.record.name))]),a("a-descriptions-item",{attrs:{label:"接口地址"}},[e._v(e._s(e.record.api))]),a("a-descriptions-item",{attrs:{label:"浏览器信息"}},[e._v(e._s(e.record.browser))]),a("a-descriptions-item",{attrs:{label:"访问 IP"}},[e._v(e._s(e.record.ip))]),a("a-descriptions-item",{attrs:{label:"状态码"}},[e._v(e._s(e.record.code))]),a("a-descriptions-item",{attrs:{label:"状态信息"}},[e._v(e._s(e.record.message||"-"))]),a("a-descriptions-item",{attrs:{label:"请求参数"}},[a("pre",[e._v(e._s(JSON.parse(e.record.params)))])]),a("a-descriptions-item",{attrs:{label:"请求时间"}},[e._v(e._s(e.record.create_time))])],1)],1)},n=[],s=a("e49c"),r={1:"登录日志",2:"操作日志",3:"异常日志"},l={mixins:[s["default"]],data:function(){return{}},filters:{typeFilter:function(e){return r[e]}},methods:{handleDetail:function(e){this.title="日志详情",this.visible=!0,this.record=e}}},o=l,c=a("4023"),d=Object(c["a"])(o,i,n,!1,null,"566e6ae3",null);t["default"]=d.exports},"75e0":function(e,t,a){"use strict";var i=a("9289"),n=a.n(i);n.a},9289:function(e,t,a){},b380:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-card",{attrs:{bordered:!1}},[a("a-row",{attrs:{gutter:16,type:"flex"}},[a("a-col",{attrs:{md:5,xs:24}},[a("a-menu",{staticClass:"log-menu",attrs:{mode:"inline",selectedKeys:e.selectedKeys},on:{click:e.handleMenuClick}},[a("a-menu-item",{key:""},[e._v("全部日志")]),a("a-menu-item",{key:"1"},[e._v("登录日志")]),a("a-menu-item",{key:"2"},[e._v("操作日志")]),a("a-menu-item",{key:"3"},[e._v("异常日志")])],1)],1),a("a-col",{attrs:{md:19,xs:24}},[a("a-table",{attrs:{columns:e.columns,"data-source":e.list,pagination:e.pagination,loading:e.loading,"row-key":"id",size:"middle"},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"operation",fn:function(t,i){return[a("a",{on:{click:function(t){return e.$refs.detailModal.handleDetail(i)}}},[e._v("详情")])]}}])})],1)],1)],1),a("detail-modal",{ref:"detailModal"})],1)},n=[],s=(a("513c"),a("80a0")),r=a("3229"),l=[{title:"用户名",dataIndex:"name"},{title:"接口",dataIndex:"api"},{title:"IP",dataIndex:"ip"},{title:"时间",dataIndex:"create_time"},{title:"操作",dataIndex:"operation",scopedSlots:{customRender:"operation"}}],o={components:{DetailModal:r["default"]},data:function(){return{columns:l,selectedKeys:[""],list:[],pagination:{showSizeChanger:!0},loading:!1}},created:function(){this.getList()},methods:{getList:function(){var e=this;this.loading=!0,this.$api.system.log.getList({current_page:this.pagination.current,page_size:this.pagination.pageSize,type:this.selectedKeys[0]||""}).then((function(t){var a=t.code,i=t.data,n=i.list,r=i.total;e.loading=!1,"200"===a&&(e.pagination=Object(s["a"])(Object(s["a"])({},e.pagination),{},{total:Number(r)}),e.list=n)})).catch((function(){e.loading=!1}))},handleTableChange:function(e){this.pagination=Object(s["a"])(Object(s["a"])({},this.pagination),{},{current:e.current,pageSize:e.pageSize}),this.getList()},handleMenuClick:function(e){var t=e.key;this.selectedKeys=[t],this.getList()}}},c=o,d=(a("75e0"),a("4023")),u=Object(d["a"])(c,i,n,!1,null,"4d110b11",null);t["default"]=u.exports}}]);