(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d20e7e9"],{b038:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,"confirm-loading":e.confirmLoading},on:{ok:e.onOk,cancel:e.onCancel},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("a-form",e._b({attrs:{form:e.form}},"a-form",e.formItemLayout,!1),[a("a-form-item",{attrs:{label:"上级菜单"}},[a("a-tree-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["parent_id",{rules:[{required:!0,message:"请选择上级菜单"}]}],expression:"['parent_id',{rules:[{required:true,message:'请选择上级菜单'}]}]"}],attrs:{"tree-data":e.treeData}})],1),a("a-form-item",{attrs:{label:"名称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入名称"}]}],expression:"['name',{rules:[{required:true,message:'请输入名称'}]}]"}]})],1),a("a-form-item",{attrs:{label:"图标"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["icon"],expression:"['icon']"}]})],1),a("a-form-item",{attrs:{label:"路由地址",extra:"支持外部链接，例：http://www.域名.com"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["route_path"],expression:"['route_path']"}]})],1),a("a-form-item",{attrs:{label:"路由名称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["route_name",{rules:[{required:!0,message:"请输入路由名称"}]}],expression:"['route_name',{rules:[{required:true,message:'请输入路由名称'}]}]"}]})],1),a("a-form-item",{attrs:{label:"路由页面"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["route_component"],expression:"['route_component']"}]})],1),a("a-form-item",{attrs:{label:"权限按钮"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["auth_button_id"],expression:"['auth_button_id']"}],attrs:{mode:"multiple"}},e._l(e.authButtonList,(function(t){return a("a-select-option",{key:t.id},[e._v(e._s(t.name))])})),1)],1),a("a-form-item",{attrs:{label:"隐藏菜单"}},[a("a-switch",{directives:[{name:"decorator",rawName:"v-decorator",value:["hidden",{valuePropName:"checked"}],expression:"['hidden',{valuePropName:'checked'}]"}]})],1),a("a-form-item",{attrs:{label:"状态"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{initialValue:"1"}],expression:"['status',{initialValue:'1'}]"}]},[a("a-radio",{attrs:{value:"1"}},[e._v("正常")]),a("a-radio",{attrs:{value:"0"}},[e._v("禁用")])],1)],1),a("a-form-item",{attrs:{label:"排序"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{initialValue:"99"}],expression:"['sort',{initialValue:'99'}]"}]})],1)],1)],1)},i=[],o=(a("b4fb"),a("b130"),a("053b"),a("90aa"),a("b449"),a("5d83")),n=a("5c62"),s=a("e49c"),u=[{label:"框架页",key:"1"}],d={mixins:[s["default"]],data:function(){return{targetList:u,authButtonList:[]}},computed:{disabledId:function(){return this.$xy.util.getFieldsValue(this.$parent.list,{parentId:this.record.id})},treeData:function(){var e=this;return[{title:"无",value:"0",key:"0"}].concat(Object(n["a"])(this.$xy.util.changeKeys(this.$parent.list,{title:"name",value:"id",key:"id",children:"children",disabled:function(t){return e.disabledId.includes(t.id)}})))}},watch:{visible:function(e){e&&this.getAuthButtonList()}},methods:{getAuthButtonList:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$api.system.authButton.getList({status:"1"});case 2:a=t.sent,r=a.code,i=a.data.list,"200"===r&&(e.authButtonList=i);case 6:case"end":return t.stop()}}),t)})))()},handleInsert:function(e){var t=this;this.toggleModal(),this.title="新增菜单",this.$nextTick((function(){t.form.setFieldsValue({parent_id:e?e.id:"0"})}))},handleCopy:function(e){this.handleEdit(e),this.record={},this.title="复制菜单"},handleEdit:function(e){var t=this;this.toggleModal(),this.record=e,this.title="编辑菜单",this.$nextTick((function(){t.form.setFieldsValue({parent_id:e.parent_id,name:e.name,icon:e.icon,route_path:e.route_path,route_name:e.route_name,route_component:e.route_component,auth_button_id:t.$xy.util.stringToArray(e.auth_button_id),hidden:t.$xy.util.stringToBoolean(e.hidden),status:e.status,sort:e.sort})}))},handleDelete:function(e){var t=this;this.$api.system.menu.delete({id:e.id}).then((function(a){var r=a.code;"200"===r&&(t.$emit("delete",e),t.$emit("complete",e))}))},onOk:function(){var e=this;this.form.validateFieldsAndScroll((function(t,a){t||(e.confirmLoading=!0,e.$api.system.menu.submit({id:e.record.id,parent_id:a.parent_id,name:a.name,icon:a.icon,route_path:a.route_path,route_name:a.route_name,route_component:a.route_component,auth_button_id:e.$xy.util.arrayToString(a.auth_button_id),hidden:e.$xy.util.booleanToString(a.hidden),status:a.status,sort:a.sort}).then((function(t){var r=t.code;e.confirmLoading=!1,"200"===r&&(e.reset(),e.toggleModal(),e.$emit("ok",a),e.$emit("complete",a))}),(function(t){e.confirmLoading=!1})))}))},onCancel:function(){this.reset(),this.toggleModal(),this.$emit("cancel")}}},l=d,c=a("4023"),m=Object(c["a"])(l,r,i,!1,null,"1b2b1113",null);t["default"]=m.exports}}]);