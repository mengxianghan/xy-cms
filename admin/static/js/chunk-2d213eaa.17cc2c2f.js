(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d213eaa"],{af5d:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,"confirm-loading":e.confirmLoading,width:1200},on:{ok:e.onOk,cancel:e.onCancel},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("a-form",e._b({attrs:{form:e.form}},"a-form",e.formItemLayout,!1),[a("a-row",[a("a-col",{attrs:{span:16}},[a("a-form-item",{attrs:{label:"标题"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{rules:[{required:!0,message:"请输入标题"}]}],expression:"['title',{rules:[{required:true,message:'请输入标题'}]}]"}]})],1),a("a-form-item",{attrs:{label:"副标题"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["sub_title"],expression:"['sub_title']"}]})],1),a("a-form-item",{attrs:{label:"SEO关键词"}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["seo_keywords"],expression:"['seo_keywords']"}]})],1),a("a-form-item",{attrs:{label:"SEO描述"}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["seo_description"],expression:"['seo_description']"}]})],1),a("a-form-item",{attrs:{label:"内容"}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["content"],expression:"['content']"}]})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-item",{attrs:{label:"所属栏目"}},[a("a-tree-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["column_id",{rules:[{required:!0,message:"请选择所属栏目"}]}],expression:"['column_id',{rules:[{required:true,message:'请选择所属栏目'}]}]"}],attrs:{"tree-data":e.columnList,loading:e.columnLoading}})],1),a("a-form-item",{attrs:{label:"作者"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["author"],expression:"['author']"}]})],1),a("a-form-item",{attrs:{label:"来源"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["source"],expression:"['source']"}]})],1),a("a-form-item",{attrs:{label:"外部链接"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["url"],expression:"['url']"}]})],1),a("a-form-item",{attrs:{label:"标签"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["tags"],expression:"['tags']"}],attrs:{mode:"tags"}})],1),a("a-form-item",{attrs:{label:"属性"}},[a("a-checkbox",{directives:[{name:"decorator",rawName:"v-decorator",value:["is_recommend",{valuePropName:"checked"}],expression:"['is_recommend',{valuePropName:'checked'}]"}]},[e._v("推荐")]),a("a-checkbox",{directives:[{name:"decorator",rawName:"v-decorator",value:["is_hot",{valuePropName:"checked"}],expression:"['is_hot',{valuePropName:'checked'}]"}]},[e._v("热点")])],1),a("a-form-item",{attrs:{label:"状态"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{initialValue:"1"}],expression:"['status',{initialValue:'1'}]"}]},[a("a-radio",{attrs:{value:"1"}},[e._v("正常")]),a("a-radio",{attrs:{value:"0"}},[e._v("禁用")])],1)],1),a("a-form-item",{attrs:{label:"排序"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{initialValue:"99"}],expression:"['sort',{initialValue:'99'}]"}]})],1)],1)],1)],1)],1)},o=[],i=(a("b449"),a("5d83")),s=a("e49c"),n={mixins:[s["default"]],data:function(){return{columnList:[],columnLoading:!1}},created:function(){},watch:{visible:function(e){e&&!this.columnList.length&&this.getColumnList()}},methods:{getColumnList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.columnLoading=!0,t.next=3,e.$api.information.column.getList();case 3:a=t.sent,r=a.code,o=a.data.list,e.columnLoading=!1,"200"===r&&(e.columnList=e.$xy.util.changeKeys(o));case 8:case"end":return t.stop()}}),t)})))()},handleInsert:function(){this.toggleModal(),this.title="新增案例"},handleEdit:function(e){var t=this;this.toggleModal(),this.record=e,this.title="编辑案例",this.$nextTick((function(){t.form.setFieldsValue({title:e.title,sub_title:e.sub_title,seo_keywords:e.seo_keywords,seo_description:e.seo_description,content:e.content,column_id:e.column_id,author:e.author,source:e.source,url:e.url,tags:t.$xy.util.stringToArray(e.tags),is_recommend:t.$xy.util.stringToBoolean(e.is_recommend),is_hot:t.$xy.util.stringToBoolean(e.is_hot),status:e.status,sort:e.sort})}))},handleDelete:function(e){var t=this;this.$api.information.news.delete({id:e.id}).then((function(a){var r=a.code;"200"===r&&(t.$emit("delete",e),t.$emit("complete",e))}))},onOk:function(){var e=this;this.form.validateFieldsAndScroll((function(t,a){t||(e.confirmLoading=!0,e.$api.information.news.submit({id:e.record.id,title:a.title,sub_title:a.sub_title,seo_keywords:a.seo_keywords,seo_description:a.seo_description,content:a.content,column_id:a.column_id,author:a.author,source:a.source,url:a.url,tags:e.$xy.util.arrayToString(a.tags),is_recommend:e.$xy.util.booleanToString(a.is_recommend),is_hot:e.$xy.util.booleanToString(a.is_hot),status:a.status,sort:a.sort}).then((function(t){var r=t.code;e.confirmLoading=!1,"200"===r&&(e.reset(),e.toggleModal(),e.$emit("ok",a),e.$emit("complete",a))}),(function(t){e.confirmLoading=!1})))}))},onCancel:function(){this.reset(),this.toggleModal(),this.$emit("cancel")}}},l=n,c=a("4023"),u=Object(c["a"])(l,r,o,!1,null,"30707bb1",null);t["default"]=u.exports}}]);