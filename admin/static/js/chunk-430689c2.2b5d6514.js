(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-430689c2","chunk-3762f1e3"],{"0467":function(e,t,a){"use strict";var r=a("2886"),i=a.n(r);i.a},1784:function(e,t,a){"use strict";var r=a("1c8b"),i=a("58d8").left,o=a("d7e1"),s=a("ff9c"),n=o("reduce"),c=s("reduce",{1:0});r({target:"Array",proto:!0,forced:!n||!c},{reduce:function(e){return i(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},2886:function(e,t,a){},2957:function(e,t,a){"use strict";var r=a("794f"),i=a.n(r);i.a},"3e88":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{attrs:{visible:e.visible,title:e.title,"wrap-class-name":"goods-drawer-wrapper",width:"80%"},on:{close:e.onCancel}},[a("div",{staticClass:"goods-drawer"},[a("div",{staticClass:"goods-drawer__form"},[a("a-form",e._b({attrs:{form:e.form}},"a-form",e.formItemLayoutGoods,!1),[a("div",{staticClass:"goods-module-title"},[e._v("商品类型")]),a("a-form-item",{attrs:{label:"商品类型"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["goods_type",{initialValue:"1"}],expression:"['goods_type',{initialValue:'1'}]"}],staticClass:"goods-type-radio"},[a("a-radio-button",{attrs:{value:"1"}},[a("div",[e._v("实物商品")]),a("div",{staticClass:"text-secondary fs-12"},[e._v("(物流发货)")])]),a("a-radio-button",{attrs:{value:"2"}},[a("div",[e._v("虚拟商品")]),a("div",{staticClass:"text-secondary fs-12"},[e._v("(无需物流)")])])],1)],1),a("div",{staticClass:"goods-module-title"},[e._v("基本信息")]),a("a-form-item",{attrs:{label:"商品名"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入商品名称"}]}],expression:"['name',{rules:[{required:true,message:'请输入商品名称'}]}]"}]})],1),a("a-form-item",{attrs:{label:"分享描述"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["share_description"],expression:"['share_description']"}]})],1),a("a-form-item",{attrs:{label:"商品卖点",extra:"在商品详情页标题下面展示卖点信息，建议60字以内"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["selling_point"],expression:"['selling_point']"}]})],1),a("a-form-item",{attrs:{label:"商品图",extra:"建议尺寸：800*800px，单张大小不超过1M，最多可上传10张"}},[a("x-uploader",{directives:[{name:"decorator",rawName:"v-decorator",value:["picture",{rules:[{required:!0,message:"请上传商品主图"}]}],expression:"['picture',{rules:[{required:true,message:'请上传商品主图'}]}]"}],attrs:{"list-type":"picture-card","show-upload-list":"",multiple:"",count:10}})],1),a("a-form-item",{attrs:{label:"展示分类"}},[a("a-tree-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["classify_id"],expression:"['classify_id']"}],attrs:{"tree-checkable":"","allow-clear":"","tree-data":e.classifyList}})],1),a("a-form-item",{attrs:{label:"商品类目"}},[a("a-tree-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["category_id"],expression:"['category_id']"}],attrs:{"tree-data":e.categoryList}})],1),a("div",{staticClass:"goods-module-title"},[e._v("价格库存")]),a("a-form-item",{attrs:{label:"价格"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["price",{rules:[{required:!0,message:"请填写价格"}]}],expression:"['price',{rules:[{required:true,message:'请填写价格'}]}]"}],attrs:{"addon-before":"¥","addon-after":"元"}})],1),a("a-form-item",{attrs:{label:"划线价",extra:"商品没有优惠的情况下，划线价在商品详情会以划线形式显示"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["crossed_price"],expression:"['crossed_price']"}],attrs:{"addon-before":"¥","addon-after":"元"}})],1),a("a-form-item",{attrs:{label:"库存扣减方式"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["inventory_deduction"],expression:"['inventory_deduction']"}]},[a("div",[a("a-radio",{attrs:{value:"1"}},[e._v("拍下减库存")]),a("div",{staticClass:"ant-form-extra"},[e._v("买家提交订单，扣减库存数量，可能存在恶意占用库存风险")])],1),a("div",[a("a-radio",{attrs:{vlaue:"2"}},[e._v("付款减库存")]),a("div",{staticClass:"ant-form-extra"},[e._v("买家支付成功，扣减库存数量，可能存在超卖风险")])],1)])],1),a("a-form-item",{attrs:{label:"库存",extra:"库存为 0 时，会放到『已售罄』的商品列表里，保存后买家看到的商品可售库存同步更新"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["inventory",{rules:[{required:!0,message:"请填写库存"}]}],expression:"['inventory',{rules:[{required:true,message:'请填写库存'}]}]"}]}),a("a-checkbox",[e._v("商品详情不显示剩余件数")])],1),a("a-form-item",{attrs:{label:"重量",extra:"该重量用于运费模版中的计重收费和同城配送续重收费"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["weight"],expression:"['weight']"}],attrs:{"addon-after":"kg"}})],1),a("a-form-item",{attrs:{label:"商品编码"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["goods_no"],expression:"['goods_no']"}]})],1),a("a-form-item",{attrs:{label:"成本价",extra:"成本价未来会用于营销建议，利润分析等"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["cost_price"],expression:"['cost_price']"}],attrs:{"addon-before":"¥","addon-after":"元"}})],1),a("div",{staticClass:"goods-module-title"},[e._v("物流信息")]),a("a-form-item",{attrs:{label:"配送方式"}},[a("a-checkbox-group",{staticClass:"delivery_method"},[a("a-checkbox",{attrs:{value:"1"}},[e._v("快递发货")]),a("a-checkbox",{attrs:{value:"2"}},[e._v("同城配送")]),a("a-checkbox",{attrs:{value:"3"}},[e._v("到店自提")])],1)],1),a("a-form-item",{attrs:{label:"快递运费"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["freight_type",{initialValue:"1"}],expression:"['freight_type',{initialValue:'1'}]"}]},[a("a-row",[a("a-col",{attrs:{span:6}},[a("a-radio",{attrs:{value:"1"}},[e._v("统一运费")])],1),a("a-col",{attrs:{span:12}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["freight"],expression:"['freight']"}],attrs:{"addon-before":"¥","addon-after":"元"}})],1)],1)],1)],1),a("div",{staticClass:"goods-module-title"},[e._v("其他信息")]),a("a-form-item",{attrs:{label:"上架时间"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["is_shelves",{initialValue:"1"}],expression:"['is_shelves',{initialValue:'1'}]"}]},[a("a-row",[a("a-col",{attrs:{span:24}},[a("a-radio",{attrs:{value:"1"}},[e._v("立即上架售卖")])],1),a("a-col",{attrs:{span:8}},[a("a-radio",{attrs:{value:"2"}},[e._v("自定义上架时间")])],1),a("a-col",{attrs:{span:16}},[a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["shelves_time"],expression:"['shelves_time']"}],attrs:{format:"YYYY-MM-DD HH:mm:ss","show-time":""}})],1),a("a-col",{attrs:{span:8}},[a("a-radio",{attrs:{value:"3"}},[e._v("暂不售卖，放入仓库")])],1)],1)],1)],1),a("a-form-item",{attrs:{label:"立即购买按钮"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["buy_button",{initialValue:"1"}],expression:"['buy_button',{initialValue:'1'}]"}]},[a("a-row",[a("a-col",{attrs:{span:12}},[a("a-radio",{attrs:{value:"1"}},[e._v("默认名称")])],1),a("a-col",{staticClass:"ant-form-extra"},[e._v("默认为“立即购买”")])],1),a("a-row",[a("a-col",{attrs:{span:12}},[a("a-radio",{attrs:{value:"2"}},[e._v("自定义名称")])],1),a("a-col",{attrs:{span:12}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["buy_button_name"],expression:"['buy_button_name']"}],attrs:{placeholder:"6个字以内"}})],1),a("a-col",{staticClass:"ant-form-extra"},[e._v("如：“马上抢购”，设置仅对当前商品有效")])],1)],1)],1)],1)],1),a("div",{staticClass:"goods-drawer__footer"},[a("a-button",{attrs:{type:"primary"},on:{click:e.onOk}},[e._v("确定")])],1)])])},i=[],o=(a("b4fb"),a("fe59"),a("1784"),a("053b"),a("08ba"),a("80a0"),a("b449"),a("5d83")),s=(a("5c62"),a("e49c"));var n={mixins:[s["default"]],data:function(){return{categoryList:[],classifyList:[]}},watch:{visible:function(e){e&&(this.categoryList.length||this.getCategoryList(),this.classifyList.length||this.getClassifyList())}},methods:{getCategoryList:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$api.mall.category.getList({status:"1",has_pagination:"0"});case 2:a=t.sent,r=a.code,i=a.data.list,"200"===r&&(e.categoryList=e.$xy.util.changeKeys(i,{title:"name",value:"id",key:"id",children:"children"}));case 6:case"end":return t.stop()}}),t)})))()},getClassifyList:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$api.mall.classify.getList({status:"1",has_pagination:"0"});case 2:a=t.sent,r=a.code,i=a.data.list,"200"===r&&(e.classifyList=e.$xy.util.changeKeys(i,{title:"name",value:"id",key:"id",children:"children"}));case 6:case"end":return t.stop()}}),t)})))()},handleInsert:function(){this.toggleModal(),this.title="新增商品"},handleEdit:function(e){var t=this;this.toggleModal(),this.record=e,this.title="编辑商品",this.$nextTick((function(){t.form.setFieldsValue({name:e.name,status:e.status,sort:e.sort})}))},handleDelete:function(e){var t=this;this.$api.system.post.delete({id:e.id}).then((function(a){var r=a.code;"200"===r&&(t.$emit("delete",e),t.$emit("complete",e))}))},onOk:function(){this.form.validateFieldsAndScroll((function(e,t){}))},onCancel:function(){this.reset(),this.toggleModal(),this.$emit("cancel")}}},c=n,d=(a("0467"),a("2957"),a("4023")),l=Object(d["a"])(c,r,i,!1,null,"f724005c",null);t["default"]=l.exports},"58d8":function(e,t,a){var r=a("0c3c"),i=a("3553"),o=a("692f"),s=a("d88d"),n=function(e){return function(t,a,n,c){r(a);var d=i(t),l=o(d),u=s(d.length),v=e?u-1:0,m=e?-1:1;if(n<2)while(1){if(v in l){c=l[v],v+=m;break}if(v+=m,e?v<0:u<=v)throw TypeError("Reduce of empty array with no initial value")}for(;e?v>=0:u>v;v+=m)v in l&&(c=a(c,l[v],v,d));return c}};e.exports={left:n(!1),right:n(!0)}},"794f":function(e,t,a){},8429:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-card",{attrs:{bordered:!1}},[a("div",{directives:[{name:"action",rawName:"v-action:insert",arg:"insert"}],staticClass:"mb-2"},[a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(t){return e.$refs.editForm.handleInsert()}}},[e._v("新增商品")])],1),a("a-table",{attrs:{columns:e.columns,"data-source":e.list,pagination:e.pagination,loading:e.loading,"row-key":"id",size:"middle"},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"status",fn:function(e){return[a("x-status",{attrs:{code:e}})]}},{key:"operation",fn:function(t,r){return[a("span",{directives:[{name:"action",rawName:"v-action:edit",arg:"edit"}]},[a("a",{on:{click:function(t){return e.$refs.editForm.handleEdit(r)}}},[e._v("编辑")]),a("a-divider",{attrs:{type:"vertical"}})],1),a("span",{directives:[{name:"action",rawName:"v-action:edit",arg:"edit"}]},[a("a",{on:{click:function(t){return e.$refs.editForm.handleEdit(r)}}},[e._v("设价")]),a("a-divider",{attrs:{type:"vertical"}})],1),a("span",{directives:[{name:"action",rawName:"v-action:edit",arg:"edit"}]},[a("a",{on:{click:function(t){return e.$refs.editForm.handleEdit(r)}}},[e._v("下架")])])]}}])})],1),a("edit-form",{ref:"editForm",on:{complete:e.onComplete}})],1)},i=[],o=(a("513c"),a("80a0")),s=a("3e88"),n=[{title:"商品名",dataIndex:"name"},{title:"价格(元)",dataIndex:"1",sorter:!0},{title:"访问量",dataIndex:"2"},{title:"库存",dataIndex:"2",sorter:!0},{title:"销量",dataIndex:"2",sorter:!0},{title:"序号",dataIndex:"2"},{title:"创建时间",dataIndex:"2",sorter:!0},{title:"商品状态",dataIndex:"2"},{title:"操作",key:"operation",scopedSlots:{customRender:"operation"}}],c={name:"index",components:{EditForm:s["default"]},data:function(){return{columns:n,list:[],pagination:{showSizeChanger:!0},loading:!1}},created:function(){this.getList()},methods:{getList:function(){var e=this;this.loading=!0,this.$api.mall.goods.getList({current_page:this.pagination.current,page_size:this.pagination.pageSize}).then((function(t){var a=t.code,r=t.data,i=r.list,s=r.total;e.loading=!1,"200"===a&&(e.pagination=Object(o["a"])(Object(o["a"])({},e.pagination),{},{total:Number(s)}),e.list=i)})).catch((function(){e.loading=!1}))},handleTableChange:function(e){this.pagination=Object(o["a"])(Object(o["a"])({},this.pagination),{},{current:e.current,pageSize:e.pageSize}),this.getList()},onComplete:function(){this.getList()}}},d=c,l=a("4023"),u=Object(l["a"])(d,r,i,!1,null,"23c7bca5",null);t["default"]=u.exports}}]);