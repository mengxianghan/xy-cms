(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-35f4c732","chunk-49e7f117"],{"5e9f":function(e,t,a){"use strict";var r=a("b2a2"),i=a("857c"),n=a("3553"),o=a("d88d"),s=a("3da3"),l=a("2732"),c=a("38eb"),u=a("59da"),d=Math.max,m=Math.min,h=Math.floor,f=/\$([$&'`]|\d\d?|<[^>]*>)/g,v=/\$([$&'`]|\d\d?)/g,g=function(e){return void 0===e?e:String(e)};r("replace",2,(function(e,t,a,r){var p=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,b=r.REPLACE_KEEPS_$0,_=p?"$":"$0";return[function(a,r){var i=l(this),n=void 0==a?void 0:a[e];return void 0!==n?n.call(a,i,r):t.call(String(i),a,r)},function(e,r){if(!p&&b||"string"===typeof r&&-1===r.indexOf(_)){var n=a(t,e,this,r);if(n.done)return n.value}var l=i(e),h=String(this),f="function"===typeof r;f||(r=String(r));var v=l.global;if(v){var w=l.unicode;l.lastIndex=0}var k=[];while(1){var S=u(l,h);if(null===S)break;if(k.push(S),!v)break;var y=String(S[0]);""===y&&(l.lastIndex=c(h,o(l.lastIndex),w))}for(var $="",N=0,T=0;T<k.length;T++){S=k[T];for(var C=String(S[0]),L=d(m(s(S.index),h.length),0),E=[],I=1;I<S.length;I++)E.push(g(S[I]));var F=S.groups;if(f){var O=[C].concat(E,L,h);void 0!==F&&O.push(F);var D=String(r.apply(void 0,O))}else D=x(C,h,L,E,F,r);L>=N&&($+=h.slice(N,L)+D,N=L+C.length)}return $+h.slice(N)}];function x(e,a,r,i,o,s){var l=r+e.length,c=i.length,u=v;return void 0!==o&&(o=n(o),u=f),t.call(s,u,(function(t,n){var s;switch(n.charAt(0)){case"$":return"$";case"&":return e;case"`":return a.slice(0,r);case"'":return a.slice(l);case"<":s=o[n.slice(1,-1)];break;default:var u=+n;if(0===u)return t;if(u>c){var d=h(u/10);return 0===d?t:d<=c?void 0===i[d-1]?n.charAt(1):i[d-1]+n.charAt(1):t}s=i[u-1]}return void 0===s?"":s}))}}))},"8b39":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-row",{attrs:{gutter:16}},[a("a-col",{attrs:{md:5,xs:24}},[a("a-card",{attrs:{bordered:!1}},[a("x-info-column",{ref:"informationColumn",attrs:{"selected-keys":e.selectedKeys},on:{select:e.handleSelect,complete:e.onInfoColumnComplete}})],1)],1),a("a-col",{attrs:{md:19,xs:24}},[a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-page-search mb-2"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:16}},[a("a-col",{attrs:{span:8}},[a("a-form-item",{attrs:{label:"标题"}},[a("a-input",{attrs:{"allow-clear":""},model:{value:e.searchForm.title,callback:function(t){e.$set(e.searchForm,"title",t)},expression:"searchForm.title"}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-item",[a("a-button",{attrs:{type:"primary",ghost:""},on:{click:e.handleSearch}},[a("a-icon",{attrs:{type:"search"}}),e._v(" 搜索 ")],1)],1)],1)],1)],1)],1),a("div",{directives:[{name:"action",rawName:"v-action:insert",arg:"insert"}],staticClass:"mb-2"},[a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(t){return e.$refs.editForm.handleInsert()}}},[e._v("新增新闻")])],1),a("a-table",{attrs:{columns:e.columns,"data-source":e.list,pagination:e.pagination,loading:e.loading,"row-key":"id",size:"middle"},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"status",fn:function(e){return[a("x-status",{attrs:{code:e}})]}},{key:"operation",fn:function(t,r){return[a("span",{directives:[{name:"action",rawName:"v-action:edit",arg:"edit"}]},[a("a",{on:{click:function(t){return e.$refs.editForm.handleEdit(r)}}},[e._v("编辑")]),a("a-divider",{attrs:{type:"vertical"}})],1),a("span",{directives:[{name:"action",rawName:"v-action:delete",arg:"delete"}]},[a("a-popconfirm",{attrs:{title:"确认删除此数据?"},on:{confirm:function(t){return e.$refs.editForm.handleDelete(r)}}},[a("a",[e._v("删除")])])],1)]}}])})],1)],1)],1),a("edit-form",{ref:"editForm",on:{complete:e.onComplete}})],1)},i=[],n=(a("9302"),a("513c"),a("80a0")),o=a("f126"),s=[{title:"标题",dataIndex:"title"},{title:"所属栏目",dataIndex:"column_name"},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"创建时间",dataIndex:"create_time"},{title:"操作",dataIndex:"operation",scopedSlots:{customRender:"operation"}}],l={name:"index",components:{EditForm:o["default"]},data:function(){return{searchForm:{},columns:s,columnTreeData:[],columnId:"",selectedKeys:[],list:[],pagination:{showSizeChanger:!0},loading:!1}},created:function(){this.getList()},methods:{getList:function(){var e=this;this.loading=!0,this.$api.information.news.getList({search:JSON.stringify(this.searchForm),column_id:this.columnId,current_page:this.pagination.current,page_size:this.pagination.pageSize}).then((function(t){var a=t.code,r=t.data,i=r.list,o=r.total;e.loading=!1,"200"===a&&(e.pagination=Object(n["a"])(Object(n["a"])({},e.pagination),{},{total:Number(o)}),e.list=i)})).catch((function(){e.loading=!1}))},handleTableChange:function(e){this.pagination=Object(n["a"])(Object(n["a"])({},this.pagination),{},{current:e.current,pageSize:e.pageSize}),this.getList()},handleSelect:function(e){var t=this.$xy.util.getFieldsValue(this.$refs.informationColumn.list,{parentField:"parent_id",parentId:e[0]||"",field:"id"}).join(",");this.columnId=t,this.selectedKeys=e,this.getList()},handleSearch:function(){this.getList()},onComplete:function(){this.getList()},onInfoColumnComplete:function(e){var t=e.treeData;this.columnTreeData=t}}},c=l,u=a("4023"),d=Object(u["a"])(c,r,i,!1,null,"6122fd54",null);t["default"]=d.exports},f126:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,"confirm-loading":e.confirmLoading,width:"90%","destory-on-close":!0},on:{ok:e.onOk,cancel:e.onCancel},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("a-form",e._b({attrs:{form:e.form}},"a-form",e.formItemLayout,!1),[a("a-row",[a("a-col",{attrs:{span:16}},[a("a-form-item",{attrs:{label:"标题"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{rules:[{required:!0,message:"请输入标题"}]}],expression:"['title',{rules:[{required:true,message:'请输入标题'}]}]"}]})],1),a("a-form-item",{attrs:{label:"副标题"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["sub_title"],expression:"['sub_title']"}]})],1),a("a-form-item",{attrs:{label:"SEO关键词"}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["seo_keywords"],expression:"['seo_keywords']"}]})],1),a("a-form-item",{attrs:{label:"SEO描述"}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["seo_description"],expression:"['seo_description']"}]})],1),a("a-form-item",{attrs:{label:"内容"}},[a("x-editor",{directives:[{name:"decorator",rawName:"v-decorator",value:["content"],expression:"['content']"}]})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-item",{attrs:{label:"所属栏目"}},[a("a-tree-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["column_id",{rules:[{required:!0,message:"请选择所属栏目"}]}],expression:"['column_id',{rules:[{required:true,message:'请选择所属栏目'}]}]"}],attrs:{"tree-data":e.columnTreeData,loading:e.columnLoading}})],1),a("a-form-item",{attrs:{label:"缩略图"}},[e.visible?a("x-uploader",{directives:[{name:"decorator",rawName:"v-decorator",value:["thumb"],expression:"['thumb']"}],attrs:{"list-type":"picture-card","show-upload-list":""}}):e._e()],1),a("a-form-item",{attrs:{label:"作者"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["author"],expression:"['author']"}]})],1),a("a-form-item",{attrs:{label:"来源"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["source"],expression:"['source']"}]})],1),a("a-form-item",{attrs:{label:"外部链接"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["external_links"],expression:"['external_links']"}]})],1),a("a-form-item",{attrs:{label:"标签"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["tag"],expression:"['tag']"}],attrs:{mode:"tags","not-found-content":e.tagSpinning?void 0:null},on:{search:e.onTagSearch,change:e.onTagChange}},[e.tagSpinning?a("a-spin",{attrs:{slot:"notFoundContent",size:"small"},slot:"notFoundContent"}):e._e(),e._l(e.tagList,(function(t){return a("a-select-option",{key:t.value},[e._v(e._s(t.text))])}))],2)],1),a("a-form-item",{attrs:{label:"属性"}},[a("a-checkbox",{directives:[{name:"decorator",rawName:"v-decorator",value:["is_recommend",{valuePropName:"checked"}],expression:"['is_recommend',{valuePropName:'checked'}]"}]},[e._v("推荐")]),a("a-checkbox",{directives:[{name:"decorator",rawName:"v-decorator",value:["is_hot",{valuePropName:"checked"}],expression:"['is_hot',{valuePropName:'checked'}]"}]},[e._v("热点")])],1),a("a-form-item",{attrs:{label:"状态"}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{initialValue:"1"}],expression:"['status',{initialValue:'1'}]"}]},[a("a-radio",{attrs:{value:"1"}},[e._v("正常")]),a("a-radio",{attrs:{value:"0"}},[e._v("禁用")])],1)],1),a("a-form-item",{attrs:{label:"排序"}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{initialValue:"99"}],expression:"['sort',{initialValue:'99'}]"}]})],1)],1)],1)],1)],1)},i=[],n=(a("2eeb"),a("053b"),a("e35a"),a("5e9f"),a("b449"),a("5d83")),o=a("e49c"),s=a("60bb"),l={mixins:[o["default"]],data:function(){return this.onTagSearch=Object(s["debounce"])(this.onTagSearch,500),{columnLoading:!1,tagList:[],tagSpinning:!1}},computed:{columnTreeData:function(){return this.$parent.columnTreeData}},methods:{handleInsert:function(){this.toggleModal(),this.title="新增新闻"},handleEdit:function(e){var t=this;this.toggleModal(),this.record=e,this.title="编辑新闻",this.$nextTick((function(){t.form.setFieldsValue({title:e.title,sub_title:e.sub_title,seo_keywords:e.seo_keywords,seo_description:e.seo_description,content:e.content,column_id:e.column_id,author:e.author,source:e.source,thumb:e.thumb,external_links:e.external_links,tag:t.$xy.util.stringToArray(e.tag),is_recommend:t.$xy.util.stringToBoolean(e.is_recommend),is_hot:t.$xy.util.stringToBoolean(e.is_hot),status:e.status,sort:e.sort})}))},handleDelete:function(e){var t=this;this.$api.information.news.delete({id:e.id}).then((function(a){var r=a.code;"200"===r&&(t.$emit("delete",e),t.$emit("complete",e))}))},onOk:function(){var e=this;this.form.validateFieldsAndScroll((function(t,a){if(!t){e.confirmLoading=!0;var r=e.$xy.util.arrayToString(a.tag);e.submitTag(r),e.$api.information.news.submit({id:e.record.id,title:a.title,sub_title:a.sub_title,seo_keywords:a.seo_keywords,seo_description:a.seo_description,content:a.content,column_id:a.column_id,author:a.author,source:a.source,thumb:a.thumb,external_links:a.external_links,tag:r,is_recommend:e.$xy.util.booleanToString(a.is_recommend),is_hot:e.$xy.util.booleanToString(a.is_hot),status:a.status,sort:a.sort}).then((function(t){var r=t.code;e.confirmLoading=!1,"200"===r&&(e.reset(),e.toggleModal(),e.$emit("ok",a),e.$emit("complete",a))}),(function(t){e.confirmLoading=!1}))}}))},onCancel:function(){this.reset(),this.toggleModal(),this.$emit("cancel")},onTagSearch:function(e){var t=this;e&&(this.tagSpinning=!0,this.$api.information.tag.getList({name:e,has_pagination:"0"}).then((function(e){var a=e.code,r=e.data.list;if(t.tagSpinning=!1,"200"===a){var i=r.map((function(e){return{text:e.name,value:e.name}}));t.tagList=i}}),(function(e){t.tagSpinning=!1})))},onTagChange:function(){this.tagList=[]},submitTag:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e){a.next=2;break}return a.abrupt("return");case 2:return a.next=4,t.$api.information.tag.replace({name:e});case 4:case"end":return a.stop()}}),a)})))()}}},c=l,u=a("4023"),d=Object(u["a"])(c,r,i,!1,null,"d0628bc0",null);t["default"]=d.exports}}]);